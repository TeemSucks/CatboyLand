<!DOCTYPE html>
<html>
<head>
    <title>CatboyLand</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="CatboyLand" property="og:title" />
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <meta content="Where the fun never starts!" property="og:description" />
    <meta content="https://9bv5rttd-3000.use.devtunnels.ms/" property="og:url" />
    <meta content="./cdn/files/logo.jpg" property="og:image" />
    <meta content="#32a852" data-react-helmet="true" name="theme-color" />
    <script src="../cdn/scripts/post.js"></script>
    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="TeemSucks" data-description="Support me on Buy me a coffee!" data-message="GIVE ME YOUR MONEY NOW" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
    <script src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.socket.io/socket.io-4.3.1.js"></script>
    <script data-cfasync="false" src="./cdn/scripts/sw.js"></script> 
    <script>
      (function (w, d, e, v, o, l, t){w['ToldWidget']=o; w[o]=w[o] || function (){(w[o].q=w[o].q || []).push(arguments);}; w[o].l=1 * new Date();l=document.createElement(e);t=document.getElementsByTagName(e)[0]; l.async=1; l.src=v; t.parentNode.insertBefore(l, t);})(window, document, 'script', 'https://scripts.told.club/sdk/sdk.js', 'told');
      told('init', '6531c472a9fcd55646f0f7f9');
    </script>
    <style>
      
* {
  box-sizing: border-box;
}

html {
  background-color: #222;
}

body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #222;
  color: #fff;
}

.container {
  max-width: 800px;
  margin: 20px auto;
  padding: 20px;
  background-color: #333;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

h1, h2 {
  color: #fff;
}

a {
  color: #fff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

header {
  background-color: #1a1a1a;
  padding: 10px;
}

nav ul {
  list-style-type: none;
  padding: 0;
}

nav ul li {
  display: inline;
  margin-right: 10px;
}

#messageForm textarea {
  width: 100%;
  margin-bottom: 10px;
  background-color: #444;
  color: #fff;
  border: none;
  padding: 10px;
  resize: vertical;
}

#postButton {
  background-color: #555;
  color: #fff;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
}

#postButton:hover {
  background-color: #777;
}

#messages {
  margin-top: 20px;
}

.message {
  border: 1px solid #666;
  padding: 10px;
  margin-bottom: 10px;
  background-color: #555;
}
/* ... Previous CSS rules ... */

#messageForm {
  margin-bottom: 20px;
}

.message {
  border: 1px solid #666;
  padding: 10px;
  margin-bottom: 10px;
  background-color: #555;
}

.message .author {
  font-weight: bold;
}

.message .tags {
  background-color: #ccc;
  padding: 5px;
  margin-bottom: 10px;
}

.message .title {
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.message .content {
  font-size: 0.9rem;
}

.message .content,
.message .tags {
  padding: 10px;
}

.button {
  background-color: #555;
  color: #fff;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
}

.button:hover {
  background-color: #777;
}

.userProfile {
            display: flex;
            align-items: center;
            margin-bottom: 20px; /* Add spacing between profile picture and username */
        }
        
        .profilePicture {
            margin-right: 15px; /* Adjust the spacing here */
            border-radius: 50%;
            width: 64px;
            height: 64px;
            overflow: hidden;
        }
        
        .profilePicture img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .message .author {
            font-weight: bold;
            display: flex; /* Display author and profile picture in a row */
            align-items: center; /* Center-align them vertically */
        }

        .user-tooltip {
    position: relative;
    cursor: pointer;
}

.user-info-popup {
    display: none;
    position: absolute;
    background: #fff;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    top: 100%; /* Position the pop-up below the username */
    left: 0;
    z-index: 1;
}

.user-tooltip:hover .user-info-popup {
    display: block;
}

        /* notifications stolen fom bulma lmao */
        .notification{background-color:#f5f5f5;border-radius:4px;position:relative;padding:1.25rem 2.5rem 1.25rem 1.5rem}.notification a:not(.button):not(.dropdown-item){color:currentColor;text-decoration:underline}.notification strong{color:currentColor}.notification code,.notification pre{background:#fff}.notification pre code{background:0 0}.notification>.delete{right:.5rem;position:absolute;top:.5rem}.notification .content,.notification .subtitle,.notification .title{color:currentColor}.notification.is-white{background-color:#fff;color:#0a0a0a}.notification.is-black{background-color:#0a0a0a;color:#fff}.notification.is-light{background-color:#f5f5f5;color:rgba(0,0,0,.7)}.notification.is-dark{background-color:#363636;color:#fff}.notification.is-primary{background-color:#00d1b2;color:#fff}.notification.is-primary.is-light{background-color:#ebfffc;color:#00947e}.notification.is-link{background-color:#485fc7;color:#fff}.notification.is-link.is-light{background-color:#eff1fa;color:#3850b7}.notification.is-info{background-color:#3e8ed0;color:#fff}.notification.is-info.is-light{background-color:#eff5fb;color:#296fa8}.notification.is-success{background-color:#48c78e;color:#fff}.notification.is-success.is-light{background-color:#effaf5;color:#257953}.notification.is-warning{background-color:#ffe08a;color:rgba(0,0,0,.7)}.notification.is-warning.is-light{background-color:#fffaeb;color:#946c00}.notification.is-danger{background-color:#f14668;color:#fff}.notification.is-danger.is-light{background-color:#feecf0;color:#cc0f35}
    </style>
</head>
<body>
    <header>
        <h1>CatboyLand</h1>
        <nav>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/profile">My Profile</a></li>
            <li><a href="/friends">Friends</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/settings">Settings</a></li>
            <% if (user.id === 1) { %>
              <li><a href="/admin">Admin Panel</a></li>
            <% } %>
            <li><a href="/api/logout">Logout</a></li>
            
          </ul>
        </nav>
      </header>

      <div class="container">
        <noscript>
          <div class="notification is-danger">
            <strong>javascript is required</strong><br/>
            Please enable javascript for this site to work properly.
          </div>
        </noscript>
        <h2>Welcome to the catboy realm!</h2>
        <div class="userProfile">
          <div class="profilePicture">
              <!-- Display the user's profile picture here -->
              <img src="/cdn/uploads/<%= user.profilePicture %>" alt="Profile Picture">
          </div>
          <!--<h2>Welcome, <%= user.username %></h2>-->
          <h2>Welcome, <%= user.username %>!</h2>
          <br />
      </div>
      <div>
        <a href="/tos" style="font-weight: bold; text-decoration: underline;">TOS</a>, <a href="/privacy" style="font-weight: bold; text-decoration: underline;">Privacy Policy</a>
      </div>
      <br />
      <p>You can find the source <a href="https://github.com/TeemSucks/CatboyLand" target="_blank" style="color:#3850b7;">here</a> :D</p>
      <!--<a rel="nofollow" href="https://www.buymeacoffee.com/TeemSucks" target="_blank"><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a cat&emoji=ðŸˆâ€â¬›&slug=TeemSucks&button_colour=5F7FFF&font_colour=ffffff&font_family=Cookie&outline_colour=000000&coffee_colour=FFDD00" /></a>-->
      <br/>
      <form id="messageForm">
          <textarea id="messageInput" name="messageContent" rows="4" cols="50"></textarea>
          <!--<input type="file" name="uploadFile" accept=".jpg, .jpeg, .png, .gif, .txt, .pdf">-->
          <button onclick="location.reload()" id="postButton" type="button">Post</button>
        </form>
        <div id="messages">
          <h3>Recent messages:</h3>
          <div id="messageList">
          <!-- Display posted messages here-->
          <div id="messageList">
              <% for (const message of recentMessages) { %>
                  <div class="message">
                      <div class="author">
                          <div class="profilePicture">
                              <!-- Display the author's profile picture here -->
                              <a href="/user/<%= message.sender.id %>"><% if (message.sender.profilePicture) { %>
                                <img src="/cdn/uploads/<%= message.sender.profilePicture %>" alt="Profile Picture">
                              <% } else { %>
                                  <!-- <script>
                                    console.log('<%= JSON.stringify(message.sender) %>');
                                  </script> -->
                                <img src="/cdn/files/pfp.jpg" alt="Profile Picture">
                                <% } %></a>
                          </div>
                          <a href="/user/<%= message.sender.id %>"><%= message.sender.username %><% if (message.sender.id === user.id) { %>
                            <%=" (you)"%>
                            <%}%>
                            <span class="user-info-popup">
                              <!-- User Information -->
                              <!-- You can display user information here -->
                              <%= message.sender.name %>, <%= message.sender.description %>
                          </span>
                          </a>:
                      </div>
                      <p style="font-size: small; color: #acacac;">
                          <% if (message.timestamp) { %>
                              <script src="../cdn/scripts/timestamp.js"></script>
                          <% } else { %>
                              No timestamp available
                          <% } %>
                      </p>
                      <p class="content"><% if (typeof message.content === "string") { %>
                        <%=message.content%>
                      <%} else {%>
                        <%-message.content.join("(newline)").replace( /(<([^>]+)>)/ig, '').replaceAll("(newline)", "<br/>")%>
                        <%}%>
                      </p>
                      <!-- <p><%=message.content%></p> -->
                      <% if (user.id === 1 || message.sender.id === user.id) { %>
                        <button class="button delete-button" data-message-id="<%= message._id %>">Delete</button>
                    <% } %>
                  </div>
              <% } %>
          </div>
      </div>
    </div>
  </body>
</html>